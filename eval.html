<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Test eval func</title>
    <script>

        var app = {
            data1: [
                {
                    item1: {
                        a: 1,
                        b: 2
                    },
                    item2: {
                        a: 10,
                        b: 20,
                        item3: {
                            a: 100,
                            b: 200,
                            item4: {
                                a: 1000,
                                b: 2000
                            }
                        }
                    }
                }
            ],
            data2: {
                a: 10000,
                b: 20000
            },
            data3: 30000
        };

        function evalWithVariable(prop, varb) {
            if (!prop || prop.indexOf(".") === -1) {
                return varb;
            }
            var obj = varb;
            var params = prop.split('.');
            for (var index = 0; index < params.length; index++) {
                var elem = params[index];
                obj = obj[elem];
            }
            return obj;
        }

        window.onload = function () {
            document.getElementById("result1").innerHTML = evalWithVariable("item2.item3.item4.a", app.data1[0]);
            document.getElementById("result2").innerHTML = evalWithVariable("data2.a", app);
            document.getElementById("result3").innerHTML = evalWithVariable("", app.data3);
        };

    </script>
</head>

<body>
    <h2 id="result1"></h2>
    <h2 id="result2"></h2>
    <h2 id="result3"></h2>
</body>

</html>
